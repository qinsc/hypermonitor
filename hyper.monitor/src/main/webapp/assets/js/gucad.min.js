var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(b){var a=this;b.onblob=function(f){var g=window.atob(f);var d=new ArrayBuffer(g.length);var e=new Uint8Array(d);for(var c=0;c<g.length;c++){e[c]=g.charCodeAt(c)}if(a.ondata){a.ondata(d)}};b.onend=function(){if(a.onend){a.onend()}};this.ondata=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(c){var b=this;c.onack=function(d){if(b.onack){b.onack(d)}};function a(d){var f="";for(var e=0;e<d.byteLength;e++){f+=String.fromCharCode(d[e])}c.sendBlob(window.btoa(f))}this.blobLength=Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH;this.sendData=function(e){var d=new Uint8Array(e);if(d.length<=b.blobLength){a(d)}else{for(var f=0;f<d.length;f+=b.blobLength){a(d.subarray(f,f+b.blobLength))}}};this.sendEnd=function(){c.sendEnd()};this.onack=null};Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH=6048;var Guacamole=Guacamole||{};Guacamole.AudioContextFactory={singleton:null,getAudioContext:function getAudioContext(){var b=window.AudioContext||window.webkitAudioContext;if(b){try{if(!Guacamole.AudioContextFactory.singleton){Guacamole.AudioContextFactory.singleton=new b()}return Guacamole.AudioContextFactory.singleton}catch(a){}}return null}};var Guacamole=Guacamole||{};Guacamole.AudioPlayer=function AudioPlayer(){this.sync=function a(){}};Guacamole.AudioPlayer.isSupportedType=function isSupportedType(a){return Guacamole.RawAudioPlayer.isSupportedType(a)};Guacamole.AudioPlayer.getSupportedTypes=function getSupportedTypes(){return Guacamole.RawAudioPlayer.getSupportedTypes()};Guacamole.AudioPlayer.getInstance=function getInstance(b,a){if(Guacamole.RawAudioPlayer.isSupportedType(a)){return new Guacamole.RawAudioPlayer(b,a)}return null};Guacamole.RawAudioPlayer=function RawAudioPlayer(e,a){var n=Guacamole.RawAudioFormat.parse(a);var d=Guacamole.AudioContextFactory.getAudioContext();var m=d.currentTime;var b=new Guacamole.ArrayBufferReader(e);var o=0.02;var j=0.3;var k=(n.bytesPerSample===1)?window.Int8Array:window.Int16Array;var i=(n.bytesPerSample===1)?128:32768;var g=[];var f=function f(v){if(v.length<=1){return v[0]}var x=0;v.forEach(function s(y){x+=y.length});var w=0;var t=new k(x);v.forEach(function u(y){t.set(y,w);w+=y.length});return t};var q=function q(v){var z=Number.MAX_VALUE;var x=v.length;var y=Math.floor(v.length/n.channels);var A=Math.floor(n.rate*o);var s=Math.max(n.channels*A,n.channels*(y-A));for(var u=s;u<v.length;u+=n.channels){var t=0;for(var w=0;w<n.channels;w++){t+=Math.abs(v[u+w])}if(t<=z){x=u+n.channels;z=t}}if(x===v.length){return[v]}return[new k(v.buffer.slice(0,x*n.bytesPerSample)),new k(v.buffer.slice(x*n.bytesPerSample))]};var c=function c(s){g.push(new k(s))};var r=function r(){var s=f(g);if(!s){return null}g=q(s);s=g.shift();return s};var p=function p(y){var u=y.length/n.channels;var s=d.currentTime;if(m<s){m=s}var x=d.createBuffer(n.channels,u,n.rate);for(var w=0;w<n.channels;w++){var t=x.getChannelData(w);var z=w;for(var v=0;v<u;v++){t[v]=y[z]/i;z+=n.channels}}return x};b.ondata=function l(u){c(new k(u));var v=r();if(!v){return}var s=d.currentTime;if(m<s){m=s}var t=d.createBufferSource();t.connect(d.destination);if(!t.start){t.start=t.noteOn}t.buffer=p(v);t.start(m);m+=v.length/n.channels/n.rate};this.sync=function h(){var s=d.currentTime;m=Math.min(m,s+j)}};Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer();Guacamole.RawAudioPlayer.isSupportedType=function isSupportedType(a){if(!Guacamole.AudioContextFactory.getAudioContext()){return false}return Guacamole.RawAudioFormat.parse(a)!==null};Guacamole.RawAudioPlayer.getSupportedTypes=function getSupportedTypes(){if(!Guacamole.AudioContextFactory.getAudioContext()){return[]}return["audio/L8","audio/L16"]};var Guacamole=Guacamole||{};Guacamole.AudioRecorder=function AudioRecorder(){this.onclose=null;this.onerror=null};Guacamole.AudioRecorder.isSupportedType=function isSupportedType(a){return Guacamole.RawAudioRecorder.isSupportedType(a)};Guacamole.AudioRecorder.getSupportedTypes=function getSupportedTypes(){return Guacamole.RawAudioRecorder.getSupportedTypes()};Guacamole.AudioRecorder.getInstance=function getInstance(b,a){if(Guacamole.RawAudioRecorder.isSupportedType(a)){return new Guacamole.RawAudioRecorder(b,a)}return null};Guacamole.RawAudioRecorder=function RawAudioRecorder(f,a){var e=this;var x=2048;var j=3;var u=Guacamole.RawAudioFormat.parse(a);var c=Guacamole.AudioContextFactory.getAudioContext();var l=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator);var t=new Guacamole.ArrayBufferWriter(f);var r=(u.bytesPerSample===1)?window.Int8Array:window.Int16Array;var m=(u.bytesPerSample===1)?128:32768;var w=0;var v=0;var s=null;var q=null;var d=null;var p=function p(y){if(y===0){return 1}var z=Math.PI*y;return Math.sin(z)/z};var i=function i(y,z){if(-z<y&&y<z){return p(y)*p(y/z)}return 0};var o=function n(A,C){var z=(A.length-1)*C;var E=Math.floor(z)-j+1;var y=Math.floor(z)+j;var D=0;for(var B=E;B<=y;B++){D+=(A[B]||0)*i(z-B,j)}return D};var g=function g(E){var y=E.length;w+=y;var F=Math.round(w*u.rate/E.sampleRate);var G=F-v;v+=G;var B=new r(G*u.channels);for(var C=0;C<u.channels;C++){var D=E.getChannelData(C);var z=C;for(var A=0;A<G;A++){B[z]=o(D,A/(G-1))*m;z+=u.channels}}return B};var h=function h(){l({audio:true},function z(B){d=c.createScriptProcessor(x,u.channels,u.channels);d.connect(c.destination);d.onaudioprocess=function A(C){t.sendData(g(C.inputBuffer).buffer)};q=c.createMediaStreamSource(B);q.connect(d);s=B},function y(){t.sendEnd();if(e.onerror){e.onerror()}})};var k=function k(){if(q){q.disconnect()}if(d){d.disconnect()}if(s){var y=s.getTracks();for(var z=0;z<y.length;z++){y[z].stop()}}d=null;q=null;s=null;t.sendEnd()};t.onack=function b(y){if(y.code===Guacamole.Status.Code.SUCCESS&&!s){h()}else{k();t.onack=null;if(y.code===Guacamole.Status.Code.RESOURCE_CLOSED){if(e.onclose){e.onclose()}}else{if(e.onerror){e.onerror()}}}}};Guacamole.RawAudioRecorder.prototype=new Guacamole.AudioRecorder();Guacamole.RawAudioRecorder.isSupportedType=function isSupportedType(a){if(!Guacamole.AudioContextFactory.getAudioContext()){return false}return Guacamole.RawAudioFormat.parse(a)!==null};Guacamole.RawAudioRecorder.getSupportedTypes=function getSupportedTypes(){if(!Guacamole.AudioContextFactory.getAudioContext()){return[]}return["audio/L8","audio/L16"]};var Guacamole=Guacamole||{};Guacamole.BlobReader=function(e,a){var d=this;var c=0;var b;if(window.BlobBuilder){b=new BlobBuilder()}else{if(window.WebKitBlobBuilder){b=new WebKitBlobBuilder()}else{if(window.MozBlobBuilder){b=new MozBlobBuilder()}else{b=new (function(){var f=[];this.append=function(g){f.push(new Blob([g],{type:a}))};this.getBlob=function(){return new Blob(f,{type:a})}})()}}}e.onblob=function(j){var k=window.atob(j);var g=new ArrayBuffer(k.length);var h=new Uint8Array(g);for(var f=0;f<k.length;f++){h[f]=k.charCodeAt(f)}b.append(g);c+=g.byteLength;if(d.onprogress){d.onprogress(g.byteLength)}e.sendAck("OK",0)};e.onend=function(){if(d.onend){d.onend()}};this.getLength=function(){return c};this.getBlob=function(){return b.getBlob()};this.onprogress=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.BlobWriter=function BlobWriter(d){var f=this;var a=new Guacamole.ArrayBufferWriter(d);a.onack=function(g){if(f.onack){f.onack(g)}};var c=function c(h,l,g){var i=(h.slice||h.webkitSlice||h.mozSlice).bind(h);var j=g-l;if(j!==g){var k=i(l,j);if(k.size===j){return k}}return i(l,g)};this.sendBlob=function b(i){var l=0;var g=new FileReader();var k=function k(){if(l>=i.size){if(f.oncomplete){f.oncomplete(i)}return}var m=c(i,l,l+a.blobLength);l+=a.blobLength;g.readAsArrayBuffer(m)};g.onload=function h(){a.sendData(g.result);a.onack=function m(n){if(f.onack){f.onack(n)}if(n.isError()){return}if(f.onprogress){f.onprogress(i,l-a.blobLength)}k()}};g.onerror=function j(){if(f.onerror){f.onerror(i,l,g.error)}};k()};this.sendEnd=function e(){a.sendEnd()};this.onack=null;this.onerror=null;this.onprogress=null;this.oncomplete=null};var Guacamole=Guacamole||{};Guacamole.Client=function(C){var D=this;var g=0;var t=1;var i=2;var h=3;var a=4;var j=5;var H=g;var y=0;var n=null;var G={0:"butt",1:"round",2:"square"};var k={0:"bevel",1:"miter",2:"round"};var z=new Guacamole.Display();var m={};var e={};var u={};var l=[];var s=[];var b=[];var f=new Guacamole.IntegerPool();var q=[];function w(I){if(I!=H){H=I;if(D.onstatechange){D.onstatechange(H)}}}function B(){return H==h||H==i}this.getDisplay=function(){return z};this.sendSize=function(J,I){if(!B()){return}C.sendMessage("size",J,I)};this.sendKeyEvent=function(I,J){if(!B()){return}C.sendMessage("key",J,I)};this.sendMouseState=function(J){if(!B()){return}z.moveCursor(Math.floor(J.x),Math.floor(J.y));var I=0;if(J.left){I|=1}if(J.middle){I|=2}if(J.right){I|=4}if(J.up){I|=8}if(J.down){I|=16}C.sendMessage("mouse",Math.floor(J.x),Math.floor(J.y),I)};this.setClipboard=function(K){if(!B()){return}var L=D.createClipboardStream("text/plain");var J=new Guacamole.StringWriter(L);for(var I=0;I<K.length;I+=4096){J.sendText(K.substring(I,I+4096))}J.sendEnd()};this.createOutputStream=function F(){var I=f.next();var J=q[I]=new Guacamole.OutputStream(D,I);return J};this.createAudioStream=function(I){var J=D.createOutputStream();C.sendMessage("audio",J.index,I);return J};this.createFileStream=function(I,J){var K=D.createOutputStream();C.sendMessage("file",K.index,I,J);return K};this.createPipeStream=function(I,J){var K=D.createOutputStream();C.sendMessage("pipe",K.index,I,J);return K};this.createClipboardStream=function(I){var J=D.createOutputStream();C.sendMessage("clipboard",J.index,I);return J};this.createObjectOutputStream=function x(K,I,J){var L=D.createOutputStream();C.sendMessage("put",K,L.index,I,J);return L};this.requestObjectInputStream=function d(J,I){if(!B()){return}C.sendMessage("get",J,I)};this.sendAck=function(I,K,J){if(!B()){return}C.sendMessage("ack",I,K,J)};this.sendBlob=function(I,J){if(!B()){return}C.sendMessage("blob",I,J)};this.endStream=function(I){if(!B()){return}C.sendMessage("end",I);if(q[I]){f.free(I);delete q[I]}};this.onstatechange=null;this.onname=null;this.onerror=null;this.onaudio=null;this.onvideo=null;this.onclipboard=null;this.onfile=null;this.onfilesystem=null;this.onpipe=null;this.onsync=null;var p=function p(I){var J=m[I];if(!J){if(I===0){J=z.getDefaultLayer()}else{if(I>0){J=z.createLayer()}else{J=z.createBuffer()}}m[I]=J}return J};function c(I){var J=l[I];if(J==null){J=l[I]=new Guacamole.Parser();J.oninstruction=C.oninstruction}return J}var r={"miter-limit":function(I,J){z.setMiterLimit(I,parseFloat(J))}};var o={ack:function(J){var M=parseInt(J[0]);var K=J[1];var I=parseInt(J[2]);var L=q[M];if(L){if(L.onack){L.onack(new Guacamole.Status(I,K))}if(I>=256&&q[M]===L){f.free(M);delete q[M]}}},arc:function(O){var N=p(parseInt(O[0]));var J=parseInt(O[1]);var P=parseInt(O[2]);var I=parseInt(O[3]);var M=parseFloat(O[4]);var K=parseFloat(O[5]);var L=parseInt(O[6]);z.arc(N,J,P,I,M,K,L!=0)},audio:function(K){var M=parseInt(K[0]);var J=K[1];var L=s[M]=new Guacamole.InputStream(D,M);var I=null;if(D.onaudio){I=D.onaudio(L,J)}if(!I){I=Guacamole.AudioPlayer.getInstance(L,J)}if(I){e[M]=I;D.sendAck(M,"OK",0)}else{D.sendAck(M,"BAD TYPE",783)}},blob:function(I){var L=parseInt(I[0]);var J=I[1];var K=s[L];if(K&&K.onblob){K.onblob(J)}},body:function E(L){var M=parseInt(L[0]);var K=b[M];var O=parseInt(L[1]);var I=L[2];var J=L[3];if(K&&K.onbody){var N=s[O]=new Guacamole.InputStream(D,O);K.onbody(N,I,J)}else{D.sendAck(O,"Receipt of body unsupported",256)}},cfill:function(N){var O=parseInt(N[0]);var K=p(parseInt(N[1]));var M=parseInt(N[2]);var L=parseInt(N[3]);var I=parseInt(N[4]);var J=parseInt(N[5]);z.setChannelMask(K,O);z.fillColor(K,M,L,I,J)},clip:function(J){var I=p(parseInt(J[0]));z.clip(I)},clipboard:function(J){var L=parseInt(J[0]);var I=J[1];if(D.onclipboard){var K=s[L]=new Guacamole.InputStream(D,L);D.onclipboard(K,I)}else{D.sendAck(L,"Clipboard unsupported",256)}},close:function(J){var I=p(parseInt(J[0]));z.close(I)},copy:function(Q){var I=p(parseInt(Q[0]));var M=parseInt(Q[1]);var L=parseInt(Q[2]);var K=parseInt(Q[3]);var R=parseInt(Q[4]);var P=parseInt(Q[5]);var J=p(parseInt(Q[6]));var O=parseInt(Q[7]);var N=parseInt(Q[8]);z.setChannelMask(J,P);z.copy(I,M,L,K,R,J,O,N)},cstroke:function(Q){var N=parseInt(Q[0]);var L=p(parseInt(Q[1]));var R=G[parseInt(Q[2])];var J=k[parseInt(Q[3])];var P=parseInt(Q[4]);var I=parseInt(Q[5]);var K=parseInt(Q[6]);var M=parseInt(Q[7]);var O=parseInt(Q[8]);z.setChannelMask(L,N);z.strokeColor(L,R,J,P,I,K,M,O)},cursor:function(P){var O=parseInt(P[0]);var N=parseInt(P[1]);var L=p(parseInt(P[2]));var J=parseInt(P[3]);var I=parseInt(P[4]);var M=parseInt(P[5]);var K=parseInt(P[6]);z.setCursor(O,N,L,J,I,M,K)},curve:function(O){var N=p(parseInt(O[0]));var K=parseInt(O[1]);var J=parseInt(O[2]);var M=parseInt(O[3]);var L=parseInt(O[4]);var I=parseInt(O[5]);var P=parseInt(O[6]);z.curveTo(N,K,J,M,L,I,P)},dispose:function(K){var I=parseInt(K[0]);if(I>0){var J=p(I);J.dispose();delete m[I]}else{if(I<0){delete m[I]}}},distort:function(Q){var I=parseInt(Q[0]);var P=parseFloat(Q[1]);var O=parseFloat(Q[2]);var N=parseFloat(Q[3]);var M=parseFloat(Q[4]);var L=parseFloat(Q[5]);var K=parseFloat(Q[6]);if(I>=0){var J=p(I);J.distort(P,O,N,M,L,K)}},error:function(J){var K=J[0];var I=parseInt(J[1]);if(D.onerror){D.onerror(new Guacamole.Status(I,K))}D.disconnect()},end:function(I){var K=parseInt(I[0]);var J=s[K];if(J){if(J.onend){J.onend()}delete s[K]}},file:function(K){var M=parseInt(K[0]);var I=K[1];var J=K[2];if(D.onfile){var L=s[M]=new Guacamole.InputStream(D,M);D.onfile(L,I,J)}else{D.sendAck(M,"File transfer unsupported",256)}},filesystem:function v(K){var L=parseInt(K[0]);var J=K[1];if(D.onfilesystem){var I=b[L]=new Guacamole.Object(D,L);D.onfilesystem(I,J)}},identity:function(J){var I=p(parseInt(J[0]));z.setTransform(I,1,0,0,1,0,0)},img:function(R){var I=parseInt(R[0]);var M=parseInt(R[1]);var L=p(parseInt(R[2]));var O=R[3];var P=parseInt(R[4]);var N=parseInt(R[5]);var Q=s[I]=new Guacamole.InputStream(D,I);var K=new Guacamole.DataURIReader(Q,O);K.onend=function J(){z.setChannelMask(L,M);z.draw(L,P,N,K.getURI())}},jpeg:function(K){var N=parseInt(K[0]);var J=p(parseInt(K[1]));var I=parseInt(K[2]);var M=parseInt(K[3]);var L=K[4];z.setChannelMask(J,N);z.draw(J,I,M,"data:image/jpeg;base64,"+L)},lfill:function(K){var L=parseInt(K[0]);var J=p(parseInt(K[1]));var I=p(parseInt(K[2]));z.setChannelMask(J,L);z.fillLayer(J,I)},line:function(K){var J=p(parseInt(K[0]));var I=parseInt(K[1]);var L=parseInt(K[2]);z.lineTo(J,I,L)},lstroke:function(K){var L=parseInt(K[0]);var J=p(parseInt(K[1]));var I=p(parseInt(K[2]));z.setChannelMask(J,L);z.strokeLayer(J,I)},move:function(N){var J=parseInt(N[0]);var K=parseInt(N[1]);var I=parseInt(N[2]);var P=parseInt(N[3]);var O=parseInt(N[4]);if(J>0&&K>=0){var L=p(J);var M=p(K);L.move(M,I,P,O)}},name:function(I){if(D.onname){D.onname(I[0])}},nest:function(I){var J=c(parseInt(I[0]));J.receive(I[1])},pipe:function(K){var M=parseInt(K[0]);var I=K[1];var J=K[2];if(D.onpipe){var L=s[M]=new Guacamole.InputStream(D,M);D.onpipe(L,I,J)}else{D.sendAck(M,"Named pipes unsupported",256)}},png:function(K){var N=parseInt(K[0]);var J=p(parseInt(K[1]));var I=parseInt(K[2]);var M=parseInt(K[3]);var L=K[4];z.setChannelMask(J,N);z.draw(J,I,M,"data:image/png;base64,"+L)},pop:function(J){var I=p(parseInt(J[0]));z.pop(I)},push:function(J){var I=p(parseInt(J[0]));z.push(I)},rect:function(M){var K=p(parseInt(M[0]));var I=parseInt(M[1]);var N=parseInt(M[2]);var J=parseInt(M[3]);var L=parseInt(M[4]);z.rect(K,I,N,J,L)},reset:function(J){var I=p(parseInt(J[0]));z.reset(I)},set:function(L){var J=p(parseInt(L[0]));var I=L[1];var M=L[2];var K=r[I];if(K){K(J,M)}},shade:function(L){var I=parseInt(L[0]);var J=parseInt(L[1]);if(I>=0){var K=p(I);K.shade(J)}},size:function(M){var J=parseInt(M[0]);var K=p(J);var L=parseInt(M[1]);var I=parseInt(M[2]);z.resize(K,L,I)},start:function(K){var J=p(parseInt(K[0]));var I=parseInt(K[1]);var L=parseInt(K[2]);z.moveTo(J,I,L)},sync:function(J){var K=parseInt(J[0]);z.flush(function I(){for(var M in e){var L=e[M];if(L){L.sync()}}if(K!==y){C.sendMessage("sync",K);y=K}});if(H===i){w(h)}if(D.onsync){D.onsync(K)}},transfer:function(Q){var I=p(parseInt(Q[0]));var N=parseInt(Q[1]);var M=parseInt(Q[2]);var L=parseInt(Q[3]);var R=parseInt(Q[4]);var K=parseInt(Q[5]);var J=p(parseInt(Q[6]));var P=parseInt(Q[7]);var O=parseInt(Q[8]);if(K===3){z.put(I,N,M,L,R,J,P,O)}else{if(K!==5){z.transfer(I,N,M,L,R,J,P,O,Guacamole.Client.DefaultTransferFunction[K])}}},transform:function(L){var K=p(parseInt(L[0]));var J=parseFloat(L[1]);var I=parseFloat(L[2]);var P=parseFloat(L[3]);var O=parseFloat(L[4]);var N=parseFloat(L[5]);var M=parseFloat(L[6]);z.transform(K,J,I,P,O,N,M)},undefine:function A(J){var K=parseInt(J[0]);var I=b[K];if(I&&I.onundefine){I.onundefine()}},video:function(L){var N=parseInt(L[0]);var J=p(parseInt(L[1]));var I=L[2];var M=s[N]=new Guacamole.InputStream(D,N);var K=null;if(D.onvideo){K=D.onvideo(M,J,I)}if(!K){K=Guacamole.VideoPlayer.getInstance(M,J,I)}if(K){u[N]=K;D.sendAck(N,"OK",0)}else{D.sendAck(N,"BAD TYPE",783)}}};C.oninstruction=function(K,J){var I=o[K];if(I){I(J)}};this.disconnect=function(){if(H!=j&&H!=a){w(a);if(n){window.clearInterval(n)}C.sendMessage("disconnect");C.disconnect();w(j)}};this.connect=function(J){w(t);try{C.connect(J)}catch(I){w(g);throw I}n=window.setInterval(function(){C.sendMessage("sync",y)},5000);w(i)}};Guacamole.Client.DefaultTransferFunction={0:function(a,b){b.red=b.green=b.blue=0},15:function(a,b){b.red=b.green=b.blue=255},3:function(a,b){b.red=a.red;b.green=a.green;b.blue=a.blue;b.alpha=a.alpha},5:function(a,b){},12:function(a,b){b.red=255&~a.red;b.green=255&~a.green;b.blue=255&~a.blue;b.alpha=a.alpha},10:function(a,b){b.red=255&~b.red;b.green=255&~b.green;b.blue=255&~b.blue},1:function(a,b){b.red=(a.red&b.red);b.green=(a.green&b.green);b.blue=(a.blue&b.blue)},14:function(a,b){b.red=255&~(a.red&b.red);b.green=255&~(a.green&b.green);b.blue=255&~(a.blue&b.blue)},7:function(a,b){b.red=(a.red|b.red);b.green=(a.green|b.green);b.blue=(a.blue|b.blue)},8:function(a,b){b.red=255&~(a.red|b.red);b.green=255&~(a.green|b.green);b.blue=255&~(a.blue|b.blue)},6:function(a,b){b.red=(a.red^b.red);b.green=(a.green^b.green);b.blue=(a.blue^b.blue)},9:function(a,b){b.red=255&~(a.red^b.red);b.green=255&~(a.green^b.green);b.blue=255&~(a.blue^b.blue)},4:function(a,b){b.red=255&(~a.red&b.red);b.green=255&(~a.green&b.green);b.blue=255&(~a.blue&b.blue)},13:function(a,b){b.red=255&(~a.red|b.red);b.green=255&(~a.green|b.green);b.blue=255&(~a.blue|b.blue)},2:function(a,b){b.red=255&(a.red&~b.red);b.green=255&(a.green&~b.green);b.blue=255&(a.blue&~b.blue)},11:function(a,b){b.red=255&(a.red|~b.red);b.green=255&(a.green|~b.green);b.blue=255&(a.blue|~b.blue)}};var Guacamole=Guacamole||{};Guacamole.DataURIReader=function(g,b){var f=this;var e="data:"+b+";base64,";g.onblob=function a(h){e+=h};g.onend=function c(){if(f.onend){f.onend()}};this.getURI=function d(){return e};this.onend=null};var Guacamole=Guacamole||{};Guacamole.Display=function(){var k=this;var n=0;var c=0;var b=1;var h=document.createElement("div");h.style.position="relative";h.style.width=n+"px";h.style.height=c+"px";h.style.transformOrigin=h.style.webkitTransformOrigin=h.style.MozTransformOrigin=h.style.OTransformOrigin=h.style.msTransformOrigin="0 0";var f=new Guacamole.Display.VisibleLayer(n,c);var l=new Guacamole.Display.VisibleLayer(0,0);l.setChannelMask(Guacamole.Layer.SRC);h.appendChild(f.getElement());h.appendChild(l.getElement());var a=document.createElement("div");a.style.position="relative";a.style.width=(n*b)+"px";a.style.height=(c*b)+"px";a.appendChild(h);this.cursorHotspotX=0;this.cursorHotspotY=0;this.cursorX=0;this.cursorY=0;this.onresize=null;this.oncursor=null;var d=[];var g=[];function j(){var o=0;while(o<g.length){var p=g[o];if(!p.isReady()){break}p.flush();o++}g.splice(0,o)}function m(p,o){this.isReady=function(){for(var q=0;q<o.length;q++){if(o[q].blocked){return false}}return true};this.flush=function(){for(var q=0;q<o.length;q++){o[q].execute()}if(p){p()}}}function e(q,p){var o=this;this.blocked=p;this.unblock=function(){if(o.blocked){o.blocked=false;j()}};this.execute=function(){if(q){q()}}}function i(q,p){var o=new e(q,p);d.push(o);return o}this.getElement=function(){return a};this.getWidth=function(){return n};this.getHeight=function(){return c};this.getDefaultLayer=function(){return f};this.getCursorLayer=function(){return l};this.createLayer=function(){var o=new Guacamole.Display.VisibleLayer(n,c);o.move(f,0,0,0);return o};this.createBuffer=function(){var o=new Guacamole.Layer(0,0);o.autosize=1;return o};this.flush=function(o){g.push(new m(o,d));d=[];j()};this.setCursor=function(u,s,t,p,o,r,v){i(function q(){k.cursorHotspotX=u;k.cursorHotspotY=s;l.resize(r,v);l.copy(t,p,o,r,v,0,0);k.moveCursor(k.cursorX,k.cursorY);if(k.oncursor){k.oncursor(l.getCanvas(),u,s)}})};this.showCursor=function(q){var o=l.getElement();var p=o.parentNode;if(q===false){if(p){p.removeChild(o)}}else{if(p!==h){h.appendChild(o)}}};this.moveCursor=function(o,p){l.translate(o-k.cursorHotspotX,p-k.cursorHotspotY);k.cursorX=o;k.cursorY=p};this.resize=function(p,q,o){i(function r(){p.resize(q,o);if(p===f){n=q;c=o;h.style.width=n+"px";h.style.height=c+"px";a.style.width=(n*b)+"px";a.style.height=(c*b)+"px";if(k.onresize){k.onresize(q,o)}}})};this.drawImage=function(q,o,s,r){i(function p(){q.drawImage(o,s,r)})};this.drawBlob=function(t,p,v,r){var s=URL.createObjectURL(r);var q=i(function o(){t.drawImage(p,v,u);URL.revokeObjectURL(s)},true);var u=new Image();u.onload=q.unblock;u.src=s};this.draw=function(s,o,u,r){var q=i(function p(){s.drawImage(o,u,t)},true);var t=new Image();t.onload=q.unblock;t.src=r};this.play=function(q,o,s,p){var r=document.createElement("video");r.type=o;r.src=p;r.addEventListener("play",function(){function t(){q.drawImage(0,0,r);if(!r.ended){window.setTimeout(t,20)}}t()},false);i(r.play)};this.transfer=function(u,p,o,q,z,s,v,t,r){i(function w(){s.transfer(u,p,o,q,z,v,t,r)})};this.put=function(u,p,o,q,w,s,v,t){i(function r(){s.put(u,p,o,q,w,v,t)})};this.copy=function(u,p,o,q,w,r,v,t){i(function s(){r.copy(u,p,o,q,w,v,t)})};this.moveTo=function(q,o,r){i(function p(){q.moveTo(o,r)})};this.lineTo=function(q,o,r){i(function p(){q.lineTo(o,r)})};this.arc=function(u,p,v,o,t,q,s){i(function r(){u.arc(p,v,o,t,q,s)})};this.curveTo=function(t,q,p,s,r,o,v){i(function u(){t.curveTo(q,p,s,r,o,v)})};this.close=function(o){i(function p(){o.close()})};this.rect=function(q,o,t,p,r){i(function s(){q.rect(o,t,p,r)})};this.clip=function(o){i(function p(){o.clip()})};this.strokeColor=function(s,w,p,u,o,q,t,v){i(function x(){s.strokeColor(w,p,u,o,q,t,v)})};this.fillColor=function(q,t,s,o,p){i(function u(){q.fillColor(t,s,o,p)})};this.strokeLayer=function(s,r,t,q,p){i(function o(){s.strokeLayer(r,t,q,p)})};this.fillLayer=function(p,o){i(function q(){p.fillLayer(o)})};this.push=function(p){i(function o(){p.push()})};this.pop=function(p){i(function o(){p.pop()})};this.reset=function(o){i(function p(){o.reset()})};this.setTransform=function(q,p,o,v,t,s,r){i(function u(){q.setTransform(p,o,v,t,s,r)})};this.transform=function(r,q,o,v,u,t,s){i(function p(){r.transform(q,o,v,u,t,s)})};this.setChannelMask=function(p,o){i(function q(){p.setChannelMask(o)})};this.setMiterLimit=function(q,o){i(function p(){q.setMiterLimit(o)})};this.scale=function(o){h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform="scale("+o+","+o+")";b=o;a.style.width=(n*b)+"px";a.style.height=(c*b)+"px"};this.getScale=function(){return b};this.flatten=function(){var p=document.createElement("canvas");p.width=f.width;p.height=f.height;var q=p.getContext("2d");function o(v){var u=[];for(var t in v.children){u.push(v.children[t])}u.sort(function s(z,y){var A=z.z-y.z;if(A!==0){return A}var x=z.getElement();var B=y.getElement();var w=B.compareDocumentPosition(x);if(w&Node.DOCUMENT_POSITION_PRECEDING){return -1}if(w&Node.DOCUMENT_POSITION_FOLLOWING){return 1}return 0});return u}function r(w,t,A){if(w.width>0&&w.height>0){var s=q.globalAlpha;q.globalAlpha*=w.alpha/255;q.drawImage(w.getCanvas(),t,A);var v=o(w);for(var u=0;u<v.length;u++){var z=v[u];r(z,t+z.x,A+z.y)}q.globalAlpha=s}}r(f,0,0);return p}};Guacamole.Display.VisibleLayer=function(f,a){Guacamole.Layer.apply(this,[f,a]);var e=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=255;this.x=0;this.y=0;this.z=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var d=e.getCanvas();d.style.position="absolute";d.style.left="0px";d.style.top="0px";var h=document.createElement("div");h.appendChild(d);h.style.width=f+"px";h.style.height=a+"px";h.style.position="absolute";h.style.left="0px";h.style.top="0px";h.style.overflow="hidden";var c=this.resize;this.resize=function(j,i){h.style.width=j+"px";h.style.height=i+"px";c(j,i)};this.getElement=function(){return h};var g="translate(0px, 0px)";var b="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(i,j){e.x=i;e.y=j;g="translate("+i+"px,"+j+"px)";h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=g+" "+b};this.move=function(j,i,m,l){if(e.parent!==j){if(e.parent){delete e.parent.children[e.__unique_id]}e.parent=j;j.children[e.__unique_id]=e;var k=j.getElement();k.appendChild(h)}e.translate(i,m);e.z=l;h.style.zIndex=l};this.shade=function(i){e.alpha=i;h.style.opacity=i/255};this.dispose=function(){if(e.parent){delete e.parent.children[e.__unique_id];e.parent=null}if(h.parentNode){h.parentNode.removeChild(h)}};this.distort=function(j,i,n,m,l,k){e.matrix=[j,i,n,m,l,k];b="matrix("+j+","+i+","+n+","+m+","+l+","+k+")";h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=g+" "+b}};Guacamole.Display.VisibleLayer.__next_id=0;var Guacamole=Guacamole||{};Guacamole.InputStream=function(a,b){var c=this;this.index=b;this.onblob=null;this.onend=null;this.sendAck=function(e,d){a.sendAck(c.index,e,d)}};var Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var b=this;var a=[];this.next_int=0;this.next=function(){if(a.length>0){return a.shift()}return b.next_int++};this.free=function(c){a.push(c)}};var Guacamole=Guacamole||{};Guacamole.JSONReader=function guacamoleJSONReader(g){var a=this;var f=new Guacamole.StringReader(g);var c="";this.getLength=function b(){return c.length};this.getJSON=function d(){return JSON.parse(c)};f.ontext=function h(i){c+=i;if(a.onprogress){a.onprogress(i.length)}};f.onend=function e(){if(a.onend){a.onend()}};this.onprogress=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.Keyboard=function(c){var i=this;this.onkeydown=null;this.onkeyup=null;var v=function(){var A=this;this.timestamp=new Date().getTime();this.defaultPrevented=false;this.keysym=null;this.reliable=false;this.getAge=function(){return new Date().getTime()-A.timestamp}};var w=function(F,E,C,A){v.apply(this);this.keyCode=F;this.keyIdentifier=E;this.key=C;this.location=A;this.keysym=y(C,A)||h(F,A);if(this.keysym&&!s(this.keysym)){this.reliable=true}if(!this.keysym&&e(F,E)){this.keysym=y(E,A,i.modifiers.shift)}var B=!i.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i));var D=!i.modifiers.alt;if((D&&i.modifiers.ctrl)||(B&&i.modifiers.alt)||i.modifiers.meta||i.modifiers.hyper){this.reliable=true}k[F]=this.keysym};w.prototype=new v();var b=function(A){v.apply(this);this.charCode=A;this.keysym=q(A);this.reliable=true};b.prototype=new v();var j=function(D,C,B,A){v.apply(this);this.keyCode=D;this.keyIdentifier=C;this.key=B;this.location=A;this.keysym=k[D]||h(D,A)||y(B,A);this.reliable=true};j.prototype=new v();var z=[];var u={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65515],92:[65383],93:null,96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]};var f={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]};var r={65027:true,65505:true,65506:true,65507:true,65508:true,65511:true,65512:true,65513:true,65514:true,65515:true,65516:true};this.modifiers=new Guacamole.Keyboard.ModifierState();this.pressed={};var n={};var k={};var d=null;var o=null;var l=function l(B,A){if(!B){return null}return B[A]||B[0]};var s=function s(A){return(A>=0&&A<=255)||(A&4294901760)===16777216};function y(C,B,F){if(!C){return null}var E;var A=C.indexOf("U+");if(A>=0){var D=C.substring(A+2);E=String.fromCharCode(parseInt(D,16))}else{if(C.length===1&&B!==3){E=C}else{return l(f[C],B)}}if(F===true){E=E.toUpperCase()}else{if(F===false){E=E.toLowerCase()}}var G=E.charCodeAt(0);return q(G)}function m(A){return A<=31||(A>=127&&A<=159)}function q(A){if(m(A)){return 65280|A}if(A>=0&&A<=255){return A}if(A>=256&&A<=1114111){return 16777216|A}return null}function h(B,A){return l(u[B],A)}var e=function e(D,C){if(!C){return false}var A=C.indexOf("U+");if(A===-1){return true}var B=parseInt(C.substring(A+2),16);if(D!==B){return true}if((D>=65&&D<=90)||(D>=48&&D<=57)){return true}return false};this.press=function(B){if(B===null){return}if(!i.pressed[B]){i.pressed[B]=true;if(i.onkeydown){var A=i.onkeydown(B);n[B]=A;window.clearTimeout(d);window.clearInterval(o);if(!r[B]){d=window.setTimeout(function(){o=window.setInterval(function(){i.onkeyup(B);i.onkeydown(B)},50)},500)}return A}}return n[B]||false};this.release=function(A){if(i.pressed[A]){delete i.pressed[A];window.clearTimeout(d);window.clearInterval(o);if(A!==null&&i.onkeyup){i.onkeyup(A)}}};this.reset=function(){for(var A in i.pressed){i.release(parseInt(A))}z=[]};var a=function a(B){var A=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(B);if(i.modifiers.alt&&A.alt===false){i.release(65513);i.release(65514);i.release(65027)}if(i.modifiers.shift&&A.shift===false){i.release(65505);i.release(65506)}if(i.modifiers.ctrl&&A.ctrl===false){i.release(65507);i.release(65508)}if(i.modifiers.meta&&A.meta===false){i.release(65511);i.release(65512)}if(i.modifiers.hyper&&A.hyper===false){i.release(65515);i.release(65516)}i.modifiers=A};function g(){var B=p();if(!B){return false}var A;do{A=B;B=p()}while(B!==null);return A.defaultPrevented}var t=function t(A){if(!i.modifiers.ctrl||!i.modifiers.alt){return}if(A>=65&&A<=90){return}if(A>=97&&A<=122){return}if(A<=255||(A&4278190080)===16777216){i.release(65507);i.release(65508);i.release(65513);i.release(65514)}};var p=function p(){var D=z[0];if(!D){return null}if(D instanceof w){var C=null;var E=[];if(D.reliable){C=D.keysym;E=z.splice(0,1)}else{if(z[1] instanceof b){C=z[1].keysym;E=z.splice(0,2)}else{if(z[1]){C=D.keysym;E=z.splice(0,1)}}}if(E.length>0){if(C){t(C);var A=!i.press(C);k[D.keyCode]=C;if(i.modifiers.meta&&C!==65511&&C!==65512){i.release(C)}for(var B=0;B<E.length;B++){E[B].defaultPrevented=A}}return D}}else{if(D instanceof j){var C=D.keysym;if(C){i.release(C);D.defaultPrevented=true}else{i.reset();return D}return z.shift()}else{return z.shift()}}return null};var x=function x(A){if("location" in A){return A.location}if("keyLocation" in A){return A.keyLocation}return 0};c.addEventListener("keydown",function(C){if(!i.onkeydown){return}var B;if(window.event){B=window.event.keyCode}else{if(C.which){B=C.which}}a(C);if(B===229){return}var A=new w(B,C.keyIdentifier,C.key,x(C));z.push(A);if(g()){C.preventDefault()}},true);c.addEventListener("keypress",function(C){if(!i.onkeydown&&!i.onkeyup){return}var B;if(window.event){B=window.event.keyCode}else{if(C.which){B=C.which}}a(C);var A=new b(B);z.push(A);if(g()){C.preventDefault()}},true);c.addEventListener("keyup",function(C){if(!i.onkeyup){return}C.preventDefault();var B;if(window.event){B=window.event.keyCode}else{if(C.which){B=C.which}}a(C);var A=new j(B,C.keyIdentifier,C.key,x(C));z.push(A);g()},true)};Guacamole.Keyboard.ModifierState=function(){this.shift=false;this.ctrl=false;this.alt=false;this.meta=false;this.hyper=false};Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(b){var a=new Guacamole.Keyboard.ModifierState();a.shift=b.shiftKey;a.ctrl=b.ctrlKey;a.alt=b.altKey;a.meta=b.metaKey;if(b.getModifierState){a.hyper=b.getModifierState("OS")||b.getModifierState("Super")||b.getModifierState("Hyper")||b.getModifierState("Win")}return a};var Guacamole=Guacamole||{};Guacamole.Layer=function(a,j){var g=this;var d=document.createElement("canvas");var b=d.getContext("2d");b.save();var e=true;var i=0;var h={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};function c(n,m){var o=null;if(g.width!==0&&g.height!==0){o=document.createElement("canvas");o.width=g.width;o.height=g.height;var l=o.getContext("2d");l.drawImage(d,0,0,g.width,g.height,0,0,g.width,g.height)}var k=b.globalCompositeOperation;d.width=n;d.height=m;if(o){b.drawImage(o,0,0,g.width,g.height,0,0,g.width,g.height)}b.globalCompositeOperation=k;g.width=n;g.height=m;i=0;b.save()}function f(k,r,l,m){var p=l+k;var o=m+r;var n;if(p>g.width){n=p}else{n=g.width}var q;if(o>g.height){q=o}else{q=g.height}g.resize(n,q)}this.autosize=false;this.width=a;this.height=j;this.getCanvas=function(){return d};this.resize=function(l,k){if(l!==g.width||k!==g.height){c(l,k)}};this.drawImage=function(k,m,l){if(g.autosize){f(k,m,l.width,l.height)}b.drawImage(l,k,m)};this.transfer=function(u,n,l,o,z,v,t,q){var p=u.getCanvas();if(n>=p.width||l>=p.height){return}if(n+o>p.width){o=p.width-n}if(l+z>p.height){z=p.height-l}if(o===0||z===0){return}if(g.autosize){f(v,t,o,z)}var k=u.getCanvas().getContext("2d").getImageData(n,l,o,z);var s=b.getImageData(v,t,o,z);for(var r=0;r<o*z*4;r+=4){var m=new Guacamole.Layer.Pixel(k.data[r],k.data[r+1],k.data[r+2],k.data[r+3]);var w=new Guacamole.Layer.Pixel(s.data[r],s.data[r+1],s.data[r+2],s.data[r+3]);q(m,w);s.data[r]=w.red;s.data[r+1]=w.green;s.data[r+2]=w.blue;s.data[r+3]=w.alpha}b.putImageData(s,v,t)};this.put=function(q,m,l,n,s,r,p){var o=q.getCanvas();if(m>=o.width||l>=o.height){return}if(m+n>o.width){n=o.width-m}if(l+s>o.height){s=o.height-l}if(n===0||s===0){return}if(g.autosize){f(r,p,n,s)}var k=q.getCanvas().getContext("2d").getImageData(m,l,n,s);b.putImageData(k,r,p)};this.copy=function(o,m,l,n,q,k,r){var p=o.getCanvas();if(m>=p.width||l>=p.height){return}if(m+n>p.width){n=p.width-m}if(l+q>p.height){q=p.height-l}if(n===0||q===0){return}if(g.autosize){f(k,r,n,q)}b.drawImage(p,m,l,n,q,k,r,n,q)};this.moveTo=function(k,l){if(e){b.beginPath();e=false}if(g.autosize){f(k,l,0,0)}b.moveTo(k,l)};this.lineTo=function(k,l){if(e){b.beginPath();e=false}if(g.autosize){f(k,l,0,0)}b.lineTo(k,l)};this.arc=function(l,p,k,o,m,n){if(e){b.beginPath();e=false}if(g.autosize){f(l,p,0,0)}b.arc(l,p,k,o,m,n)};this.curveTo=function(m,l,o,n,k,p){if(e){b.beginPath();e=false}if(g.autosize){f(k,p,0,0)}b.bezierCurveTo(m,l,o,n,k,p)};this.close=function(){b.closePath();e=true};this.rect=function(k,n,l,m){if(e){b.beginPath();e=false}if(g.autosize){f(k,n,l,m)}b.rect(k,n,l,m)};this.clip=function(){b.clip();e=true};this.strokeColor=function(n,q,m,p,o,k,l){b.lineCap=n;b.lineJoin=q;b.lineWidth=m;b.strokeStyle="rgba("+p+","+o+","+k+","+l/255+")";b.stroke();e=true};this.fillColor=function(n,m,k,l){b.fillStyle="rgba("+n+","+m+","+k+","+l/255+")";b.fill();e=true};this.strokeLayer=function(m,n,l,k){b.lineCap=m;b.lineJoin=n;b.lineWidth=l;b.strokeStyle=b.createPattern(k.getCanvas(),"repeat");b.stroke();e=true};this.fillLayer=function(k){b.fillStyle=b.createPattern(k.getCanvas(),"repeat");b.fill();e=true};this.push=function(){b.save();i++};this.pop=function(){if(i>0){b.restore();i--}};this.reset=function(){while(i>0){b.restore();i--}b.restore();b.save();b.beginPath();e=false};this.setTransform=function(l,k,p,o,n,m){b.setTransform(l,k,p,o,n,m)};this.transform=function(l,k,p,o,n,m){b.transform(l,k,p,o,n,m)};this.setChannelMask=function(k){b.globalCompositeOperation=h[k]};this.setMiterLimit=function(k){b.miterLimit=k};d.width=a;d.height=j;d.style.zIndex=-1};Guacamole.Layer.ROUT=2;Guacamole.Layer.ATOP=6;Guacamole.Layer.XOR=10;Guacamole.Layer.ROVER=11;Guacamole.Layer.OVER=14;Guacamole.Layer.PLUS=15;Guacamole.Layer.RIN=1;Guacamole.Layer.IN=4;Guacamole.Layer.OUT=8;Guacamole.Layer.RATOP=9;Guacamole.Layer.SRC=12;Guacamole.Layer.Pixel=function(f,e,c,d){this.red=f;this.green=e;this.blue=c;this.alpha=d};var Guacamole=Guacamole||{};Guacamole.Mouse=function(f){var e=this;this.touchMouseThreshold=3;this.scrollThreshold=53;this.PIXELS_PER_LINE=18;this.PIXELS_PER_PAGE=this.PIXELS_PER_LINE*16;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;this.onmouseout=null;var g=0;var a=0;function d(i){i.stopPropagation();if(i.preventDefault){i.preventDefault()}i.returnValue=false}f.addEventListener("contextmenu",function(i){d(i)},false);f.addEventListener("mousemove",function(i){d(i);if(g){g--;return}e.currentState.fromClientPosition(f,i.clientX,i.clientY);if(e.onmousemove){e.onmousemove(e.currentState)}},false);f.addEventListener("mousedown",function(i){d(i);if(g){return}switch(i.button){case 0:e.currentState.left=true;break;case 1:e.currentState.middle=true;break;case 2:e.currentState.right=true;break}if(e.onmousedown){e.onmousedown(e.currentState)}},false);f.addEventListener("mouseup",function(i){d(i);if(g){return}switch(i.button){case 0:e.currentState.left=false;break;case 1:e.currentState.middle=false;break;case 2:e.currentState.right=false;break}if(e.onmouseup){e.onmouseup(e.currentState)}},false);f.addEventListener("mouseout",function(j){if(!j){j=window.event}var i=j.relatedTarget||j.toElement;while(i){if(i===f){return}i=i.parentNode}d(j);if(e.currentState.left||e.currentState.middle||e.currentState.right){e.currentState.left=false;e.currentState.middle=false;e.currentState.right=false;if(e.onmouseup){e.onmouseup(e.currentState)}}if(e.onmouseout){e.onmouseout()}},false);f.addEventListener("selectstart",function(i){d(i)},false);function c(){g=e.touchMouseThreshold}f.addEventListener("touchmove",c,false);f.addEventListener("touchstart",c,false);f.addEventListener("touchend",c,false);function h(i){var j=i.deltaY||-i.wheelDeltaY||-i.wheelDelta;if(j){if(i.deltaMode===1){j=i.deltaY*e.PIXELS_PER_LINE}else{if(i.deltaMode===2){j=i.deltaY*e.PIXELS_PER_PAGE}}}else{j=i.detail*e.PIXELS_PER_LINE}a+=j;if(a<=-e.scrollThreshold){do{if(e.onmousedown){e.currentState.up=true;e.onmousedown(e.currentState)}if(e.onmouseup){e.currentState.up=false;e.onmouseup(e.currentState)}a+=e.scrollThreshold}while(a<=-e.scrollThreshold);a=0}if(a>=e.scrollThreshold){do{if(e.onmousedown){e.currentState.down=true;e.onmousedown(e.currentState)}if(e.onmouseup){e.currentState.down=false;e.onmouseup(e.currentState)}a-=e.scrollThreshold}while(a>=e.scrollThreshold);a=0}d(i)}f.addEventListener("DOMMouseScroll",h,false);f.addEventListener("mousewheel",h,false);f.addEventListener("wheel",h,false);var b=(function(){var j=document.createElement("div");if(!("cursor" in j.style)){return false}try{j.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(i){return false}return/\burl\([^()]*\)\s+0\s+0\b/.test(j.style.cursor||"")})();this.setCursor=function(j,i,l){if(b){var k=j.toDataURL("image/png");f.style.cursor="url("+k+") "+i+" "+l+", auto";return true}return false}};Guacamole.Mouse.State=function(b,h,f,c,d,a,g){var e=this;this.x=b;this.y=h;this.left=f;this.middle=c;this.right=d;this.up=a;this.down=g;this.fromClientPosition=function(j,n,m){e.x=n-j.offsetLeft;e.y=m-j.offsetTop;var l=j.offsetParent;while(l&&!(l===document.body)){e.x-=l.offsetLeft-l.scrollLeft;e.y-=l.offsetTop-l.scrollTop;l=l.offsetParent}if(l){var k=document.body.scrollLeft||document.documentElement.scrollLeft;var i=document.body.scrollTop||document.documentElement.scrollTop;e.x-=l.offsetLeft-k;e.y-=l.offsetTop-i}}};Guacamole.Mouse.Touchpad=function(d){var c=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;var a=0;var h=0;var g=0;var f=0;var e=0;var b={1:"left",2:"right",3:"middle"};var j=false;var i=null;d.addEventListener("touchend",function(m){m.preventDefault();if(j&&m.touches.length===0){var l=new Date().getTime();var k=b[a];if(c.currentState[k]){c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}if(i){window.clearTimeout(i);i=null}}if(l-f<=c.clickTimingThreshold&&e<c.clickMoveThreshold){c.currentState[k]=true;if(c.onmousedown){c.onmousedown(c.currentState)}i=window.setTimeout(function(){c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}j=false},c.clickTimingThreshold)}if(!i){j=false}}},false);d.addEventListener("touchstart",function(l){l.preventDefault();a=Math.min(l.touches.length,3);if(i){window.clearTimeout(i);i=null}if(!j){j=true;var k=l.touches[0];h=k.clientX;g=k.clientY;f=new Date().getTime();e=0}},false);d.addEventListener("touchmove",function(m){m.preventDefault();var q=m.touches[0];var p=q.clientX-h;var o=q.clientY-g;e+=Math.abs(p)+Math.abs(o);if(a===1){var l=e/(new Date().getTime()-f);var n=1+l;c.currentState.x+=p*n;c.currentState.y+=o*n;if(c.currentState.x<0){c.currentState.x=0}else{if(c.currentState.x>=d.offsetWidth){c.currentState.x=d.offsetWidth-1}}if(c.currentState.y<0){c.currentState.y=0}else{if(c.currentState.y>=d.offsetHeight){c.currentState.y=d.offsetHeight-1}}if(c.onmousemove){c.onmousemove(c.currentState)}h=q.clientX;g=q.clientY}else{if(a===2){if(Math.abs(o)>=c.scrollThreshold){var k;if(o>0){k="down"}else{k="up"}c.currentState[k]=true;if(c.onmousedown){c.onmousedown(c.currentState)}c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}h=q.clientX;g=q.clientY}}}},false)};Guacamole.Mouse.Touchscreen=function(e){var d=this;var k=false;var j=null;var i=null;var l=null;var h=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;function m(o){if(!d.currentState[o]){d.currentState[o]=true;if(d.onmousedown){d.onmousedown(d.currentState)}}}function g(o){if(d.currentState[o]){d.currentState[o]=false;if(d.onmouseup){d.onmouseup(d.currentState)}}}function c(o){m(o);g(o)}function b(o,p){d.currentState.fromClientPosition(e,o,p);if(d.onmousemove){d.onmousemove(d.currentState)}}function a(o){var r=o.touches[0]||o.changedTouches[0];var q=r.clientX-j;var p=r.clientY-i;return Math.sqrt(q*q+p*p)>=d.clickMoveThreshold}function f(o){var p=o.touches[0];k=true;j=p.clientX;i=p.clientY}function n(){window.clearTimeout(l);window.clearTimeout(h);k=false}e.addEventListener("touchend",function(o){if(!k){return}if(o.touches.length!==0||o.changedTouches.length!==1){n();return}window.clearTimeout(h);g("left");if(!a(o)){o.preventDefault();if(!d.currentState.left){var p=o.changedTouches[0];b(p.clientX,p.clientY);m("left");l=window.setTimeout(function(){g("left");n()},d.clickTimingThreshold)}}},false);e.addEventListener("touchstart",function(o){if(o.touches.length!==1){n();return}o.preventDefault();f(o);window.clearTimeout(l);h=window.setTimeout(function(){var p=o.touches[0];b(p.clientX,p.clientY);c("right");n()},d.longPressThreshold)},false);e.addEventListener("touchmove",function(o){if(!k){return}if(a(o)){window.clearTimeout(h)}if(o.touches.length!==1){n();return}if(d.currentState.left){o.preventDefault();var p=o.touches[0];b(p.clientX,p.clientY)}},false)};var Guacamole=Guacamole||{};var Guacamole=Guacamole||{};Guacamole.Object=function guacamoleObject(e,f){var g=this;var h={};var a=function a(j){var k=h[j];if(!k){return null}var l=k.shift();if(k.length===0){delete h[j]}return l};var d=function d(j,l){var k=h[j];if(!k){k=[];h[j]=k}k.push(l)};this.index=f;this.onbody=function i(l,j,k){var m=a(k);if(m){m(l,j)}};this.onundefine=null;this.requestInputStream=function c(k,j){if(j){d(k,j)}e.requestObjectInputStream(g.index,k)};this.createOutputStream=function b(j,k){return e.createObjectOutputStream(g.index,j,k)}};Guacamole.Object.ROOT_STREAM="/";Guacamole.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json";var Guacamole=Guacamole||{};Guacamole.OnScreenKeyboard=function(q){var e=this;var h={};var b={};var d=[];var i=function i(u,v){if(u.classList){u.classList.add(v)}else{u.className+=" "+v}};var j=function j(u,w){if(u.classList){u.classList.remove(w)}else{u.className=u.className.replace(/([^ ]+)[ ]*/g,function v(y,x){if(x===w){return""}return y})}};var t=0;var f=function f(){t=e.touchMouseThreshold};var r=function r(v,w,u,x){this.width=w;this.height=u;this.scale=function(y){v.style.width=(w*y)+"px";v.style.height=(u*y)+"px";if(x){v.style.lineHeight=(u*y)+"px";v.style.fontSize=y+"px"}}};var l=function l(w){for(var v=0;v<w.length;v++){var u=w[v];if(!(u in h)){return false}}return true};var g=function g(w){var x=e.keys[w];if(!x){return null}for(var u=x.length-1;u>=0;u--){var v=x[u];if(l(v.requires)){return v}}return null};var m=function m(x,y){if(!b[x]){i(y,"guac-keyboard-pressed");var w=g(x);if(w.modifier){var v="guac-keyboard-modifier-"+n(w.modifier);var u=h[w.modifier];if(!u){i(c,v);h[w.modifier]=w.keysym;if(e.onkeydown){e.onkeydown(w.keysym)}}else{j(c,v);delete h[w.modifier];if(e.onkeyup){e.onkeyup(u)}}}else{if(e.onkeydown){e.onkeydown(w.keysym)}}b[x]=true}};var o=function o(v,w){if(b[v]){j(w,"guac-keyboard-pressed");var u=g(v);if(!u.modifier&&e.onkeyup){e.onkeyup(u.keysym)}b[v]=false}};var c=document.createElement("div");c.className="guac-keyboard";c.onselectstart=c.onmousemove=c.onmouseup=c.onmousedown=function k(u){if(t){t--}u.stopPropagation();return false};this.touchMouseThreshold=3;this.onkeydown=null;this.onkeyup=null;this.layout=new Guacamole.OnScreenKeyboard.Layout(q);this.getElement=function(){return c};this.resize=function(w){var x=Math.floor(w*10/e.layout.width)/10;for(var v=0;v<d.length;v++){var u=d[v];u.scale(x)}};var s=function s(v,u){if(u instanceof Array){var x=[];for(var w=0;w<u.length;w++){x.push(new Guacamole.OnScreenKeyboard.Key(u[w],v))}return x}if(typeof u==="number"){return[new Guacamole.OnScreenKeyboard.Key({name:v,keysym:u})]}if(typeof u==="string"){return[new Guacamole.OnScreenKeyboard.Key({name:v,title:u})]}return[new Guacamole.OnScreenKeyboard.Key(u,v)]};var a=function a(w){var v={};for(var u in q.keys){v[u]=s(u,w[u])}return v};this.keys=a(q.keys);var n=function n(u){var v=u.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase();return v};var p=function p(A,x,v){var B;var u=document.createElement("div");if(v){i(u,"guac-keyboard-"+n(v))}if(x instanceof Array){i(u,"guac-keyboard-group");for(B=0;B<x.length;B++){p(u,x[B])}}else{if(x instanceof Object){i(u,"guac-keyboard-group");var F=Object.keys(x).sort();for(B=0;B<F.length;B++){var v=F[B];p(u,x[v],v)}}else{if(typeof x==="number"){i(u,"guac-keyboard-gap");d.push(new r(u,x,x))}else{if(typeof x==="string"){var H=x;if(H.length===1){H="0x"+H.charCodeAt(0).toString(16)}i(u,"guac-keyboard-key-container");var J=document.createElement("div");J.className="guac-keyboard-key guac-keyboard-key-"+n(H);var I=e.keys[x];if(I){for(B=0;B<I.length;B++){var G=I[B];var E=document.createElement("div");E.className="guac-keyboard-cap";E.textContent=G.title;for(var y=0;y<G.requires.length;y++){var K=G.requires[y];i(E,"guac-keyboard-requires-"+n(K));i(J,"guac-keyboard-uses-"+n(K))}J.appendChild(E)}}u.appendChild(J);d.push(new r(u,e.layout.keyWidths[x]||1,1,true));var D=function D(L){L.preventDefault();t=e.touchMouseThreshold;m(x,J)};var w=function w(L){L.preventDefault();t=e.touchMouseThreshold;o(x,J)};var z=function z(L){L.preventDefault();if(t===0){m(x,J)}};var C=function C(L){L.preventDefault();if(t===0){o(x,J)}};J.addEventListener("touchstart",D,true);J.addEventListener("touchend",w,true);J.addEventListener("mousedown",z,true);J.addEventListener("mouseup",C,true);J.addEventListener("mouseout",C,true)}}}}A.appendChild(u)};p(c,q.layout)};Guacamole.OnScreenKeyboard.Layout=function(a){this.language=a.language;this.type=a.type;this.keys=a.keys;this.layout=a.layout;this.width=a.width;this.keyWidths=a.keyWidths||{}};Guacamole.OnScreenKeyboard.Key=function(c,a){this.name=a||c.name;this.title=c.title||this.name;this.keysym=c.keysym||(function b(e){if(!e||e.length!==1){return null}var d=e.charCodeAt(0);if(d>=0&&d<=255){return d}if(d>=256&&d<=1114111){return 16777216|d}return null})(this.title);this.modifier=c.modifier;this.requires=c.requires||[]};var Guacamole=Guacamole||{};Guacamole.OutputStream=function(a,b){var c=this;this.index=b;this.onack=null;this.sendBlob=function(d){a.sendBlob(c.index,d)};this.sendEnd=function(){a.endStream(c.index)}};var Guacamole=Guacamole||{};Guacamole.Parser=function(){var e=this;var b="";var d=[];var c=-1;var a=0;this.receive=function(k){if(a>4096&&c>=a){b=b.substring(a);c-=a;a=0}b+=k;while(c<b.length){if(c>=a){var h=b.substring(a,c);var g=b.substring(c,c+1);d.push(h);if(g==";"){var j=d.shift();if(e.oninstruction!=null){e.oninstruction(j,d)}d.length=0}else{if(g!=","){throw new Error("Illegal terminator.")}}a=c+1}var f=b.indexOf(".",a);if(f!=-1){var i=parseInt(b.substring(c+1,f));if(i==NaN){throw new Error("Non-numeric character in element length.")}a=f+1;c=a+i}else{a=b.length;break}}};this.oninstruction=null};var Guacamole=Guacamole||{};Guacamole.RawAudioFormat=function RawAudioFormat(a){this.bytesPerSample=a.bytesPerSample;this.channels=a.channels;this.rate=a.rate};Guacamole.RawAudioFormat.parse=function parseFormat(g){var b;var f=null;var e=1;if(g.substring(0,9)==="audio/L8;"){g=g.substring(9);b=1}else{if(g.substring(0,10)==="audio/L16;"){g=g.substring(10);b=2}else{return null}}var k=g.split(",");for(var d=0;d<k.length;d++){var j=k[d];var c=j.indexOf("=");if(c===-1){return null}var a=j.substring(0,c);var h=j.substring(c+1);switch(a){case"channels":e=parseInt(h);break;case"rate":f=parseInt(h);break;default:return null}}if(f===null){return null}return new Guacamole.RawAudioFormat({bytesPerSample:b,channels:e,rate:f})};var Guacamole=Guacamole||{};Guacamole.Status=function(b,a){var c=this;this.code=b;this.message=a;this.isError=function(){return c.code<0||c.code>255}};Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,RESOURCE_CLOSED:518,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};var Guacamole=Guacamole||{};Guacamole.StringReader=function(e){var d=this;var b=new Guacamole.ArrayBufferReader(e);var f=0;var c=0;function a(h){var l="";var g=new Uint8Array(h);for(var j=0;j<g.length;j++){var k=g[j];if(f===0){if((k|127)===127){l+=String.fromCharCode(k)}else{if((k|31)===223){c=k&31;f=1}else{if((k|15)===239){c=k&15;f=2}else{if((k|7)===247){c=k&7;f=3}else{l+="\uFFFD"}}}}}else{if((k|63)===191){c=(c<<6)|(k&63);f--;if(f===0){l+=String.fromCharCode(c)}}else{f=0;l+="\uFFFD"}}}return l}b.ondata=function(g){var h=a(g);if(d.ontext){d.ontext(h)}};b.onend=function(){if(d.onend){d.onend()}};this.ontext=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.StringWriter=function(h){var e=this;var c=new Guacamole.ArrayBufferWriter(h);var a=new Uint8Array(8192);var g=0;c.onack=function(i){if(e.onack){e.onack(i)}};function f(i){if(g+i>=a.length){var j=new Uint8Array((g+i)*2);j.set(a);a=j}g+=i}function d(m){var k;var j;if(m<=127){k=0;j=1}else{if(m<=2047){k=192;j=2}else{if(m<=65535){k=224;j=3}else{if(m<=2097151){k=240;j=4}else{d(65533);return}}}}f(j);var n=g-1;for(var l=1;l<j;l++){a[n--]=128|(m&63);m>>=6}a[n]=k|m}function b(m){for(var j=0;j<m.length;j++){var l=m.charCodeAt(j);d(l)}if(g>0){var k=a.subarray(0,g);g=0;return k}}this.sendText=function(i){if(i.length){c.sendData(b(i))}};this.sendEnd=function(){c.sendEnd()};this.onack=null};var Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(a){};this.disconnect=function(){};this.sendMessage=function(a){};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15000;this.uuid=null;this.onerror=null;this.onstatechange=null;this.oninstruction=null};Guacamole.Tunnel.INTERNAL_DATA_OPCODE="";Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2};Guacamole.HTTPTunnel=function(g,k){var q=this;var i=g+"?connect";var t=g+"?read:";var j=g+"?write:";var h=1;var l=0;var r=h;var o=false;var f="";var c=!!k;var d=null;function b(){window.clearTimeout(d);d=window.setTimeout(function(){a(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},q.receiveTimeout)}function a(u){if(q.state===Guacamole.Tunnel.State.CLOSED){return}if(u.code!==Guacamole.Status.Code.SUCCESS&&q.onerror){if(q.state===Guacamole.Tunnel.State.CONNECTING||u.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND){q.onerror(u)}}q.state=Guacamole.Tunnel.State.CLOSED;o=false;if(q.onstatechange){q.onstatechange(q.state)}}this.sendMessage=function(){if(q.state!==Guacamole.Tunnel.State.OPEN){return}if(arguments.length===0){return}function v(y){var x=new String(y);return x.length+"."+x}var w=v(arguments[0]);for(var u=1;u<arguments.length;u++){w+=","+v(arguments[u])}w+=";";f+=w;if(!o){n()}};function n(){if(q.state!==Guacamole.Tunnel.State.OPEN){return}if(f.length>0){o=true;var u=new XMLHttpRequest();u.open("POST",j+q.uuid);u.withCredentials=c;u.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");u.onreadystatechange=function(){if(u.readyState===4){if(u.status!==200){m(u)}else{n()}}};u.send(f);f=""}else{o=false}}function m(w){var v=parseInt(w.getResponseHeader("Guacamole-Status-Code"));var u=w.getResponseHeader("Guacamole-Error-Message");a(new Guacamole.Status(v,u))}function s(x){var u=null;var z=null;var w=0;var v=-1;var A=0;var y=new Array();function B(){if(q.state!==Guacamole.Tunnel.State.OPEN){if(u!==null){clearInterval(u)}return}if(x.readyState<2){return}var C;try{C=x.status}catch(J){C=200}if(!z&&C===200){z=p()}if(x.readyState===3||x.readyState===4){b();if(r===h){if(x.readyState===3&&!u){u=setInterval(B,30)}else{if(x.readyState===4&&!u){clearInterval(u)}}}if(x.status===0){q.disconnect();return}else{if(x.status!==200){m(x);return}}var I;try{I=x.responseText}catch(J){return}while(v<I.length){if(v>=A){var E=I.substring(A,v);var D=I.substring(v,v+1);y.push(E);if(D===";"){var H=y.shift();if(q.oninstruction){q.oninstruction(H,y)}y.length=0}A=v+1}var F=I.indexOf(".",A);if(F!==-1){var G=parseInt(I.substring(v+1,F));if(G===0){if(!u){clearInterval(u)}x.onreadystatechange=null;x.abort();if(z){s(z)}break}A=F+1;v=A+G}else{A=I.length;break}}}}if(r===h){x.onreadystatechange=function(){if(x.readyState===3){w++;if(w>=2){r=l;x.onreadystatechange=B}}B()}}else{x.onreadystatechange=B}B()}var e=0;function p(){var u=new XMLHttpRequest();u.open("GET",t+q.uuid+":"+(e++));u.withCredentials=c;u.send(null);return u}this.connect=function(u){b();var v=new XMLHttpRequest();v.onreadystatechange=function(){if(v.readyState!==4){return}if(v.status!==200){m(v);return}b();q.uuid=v.responseText;q.state=Guacamole.Tunnel.State.OPEN;if(q.onstatechange){q.onstatechange(q.state)}s(p())};v.open("POST",i,true);v.withCredentials=c;v.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");v.send(u)};this.disconnect=function(){a(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel();Guacamole.WebSocketTunnel=function(c){var e=this;var f=null;var a=null;var b={"http:":"ws:","https:":"wss:"};if(c.substring(0,3)!=="ws:"&&c.substring(0,4)!=="wss:"){var h=b[window.location.protocol];if(c.substring(0,1)==="/"){c=h+"//"+window.location.host+c}else{var d=window.location.pathname.lastIndexOf("/");var j=window.location.pathname.substring(0,d+1);c=h+"//"+window.location.host+j+c}}function i(){window.clearTimeout(a);a=window.setTimeout(function(){g(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},e.receiveTimeout)}function g(k){if(e.state===Guacamole.Tunnel.State.CLOSED){return}if(k.code!==Guacamole.Status.Code.SUCCESS&&e.onerror){e.onerror(k)}e.state=Guacamole.Tunnel.State.CLOSED;if(e.onstatechange){e.onstatechange(e.state)}f.close()}this.sendMessage=function(n){if(e.state!==Guacamole.Tunnel.State.OPEN){return}if(arguments.length===0){return}function l(p){var o=new String(p);return o.length+"."+o}var m=l(arguments[0]);for(var k=1;k<arguments.length;k++){m+=","+l(arguments[k])}m+=";";f.send(m)};this.connect=function(k){i();f=new WebSocket(c+"?"+k,"guacamole");f.onopen=function(l){i()};f.onclose=function(l){g(new Guacamole.Status(parseInt(l.reason),l.reason))};f.onerror=function(l){g(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,l.data))};f.onmessage=function(n){i();var u=n.data;var s=0;var r;var m=[];do{var t=u.indexOf(".",s);if(t!==-1){var o=parseInt(u.substring(r+1,t));s=t+1;r=s+o}else{g(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."))}var q=u.substring(s,r);var l=u.substring(r,r+1);m.push(q);if(l===";"){var p=m.shift();if(e.state!==Guacamole.Tunnel.State.OPEN){if(p===Guacamole.Tunnel.INTERNAL_DATA_OPCODE){e.uuid=m[0]}e.state=Guacamole.Tunnel.State.OPEN;if(e.onstatechange){e.onstatechange(e.state)}}if(p!==Guacamole.Tunnel.INTERNAL_DATA_OPCODE&&e.oninstruction){e.oninstruction(p,m)}m.length=0}s=r+1}while(s<u.length)}};this.disconnect=function(){g(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel();Guacamole.ChainedTunnel=function(e){var c=this;var a;var g=[];var f=null;for(var d=0;d<arguments.length;d++){g.push(arguments[d])}function b(j){c.disconnect=j.disconnect;c.sendMessage=j.sendMessage;var i=function i(k){if(k&&k.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT){g=[];return null}var l=g.shift();if(l){j.onerror=null;j.oninstruction=null;j.onstatechange=null;b(l)}return l};function h(){j.onstatechange=c.onstatechange;j.oninstruction=c.oninstruction;j.onerror=c.onerror;c.uuid=j.uuid;f=j}j.onstatechange=function(k){switch(k){case Guacamole.Tunnel.State.OPEN:h();if(c.onstatechange){c.onstatechange(k)}break;case Guacamole.Tunnel.State.CLOSED:if(!i()&&c.onstatechange){c.onstatechange(k)}break}};j.oninstruction=function(l,k){h();if(c.oninstruction){c.oninstruction(l,k)}};j.onerror=function(k){if(!i(k)&&c.onerror){c.onerror(k)}};j.connect(a)}this.connect=function(i){a=i;var h=f?f:g.shift();if(h){b(h)}else{if(c.onerror){c.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}}}};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel();var Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.9";var Guacamole=Guacamole||{};Guacamole.VideoPlayer=function VideoPlayer(){this.sync=function a(){}};Guacamole.VideoPlayer.isSupportedType=function isSupportedType(a){return false};Guacamole.VideoPlayer.getSupportedTypes=function getSupportedTypes(){return[]};Guacamole.VideoPlayer.getInstance=function getInstance(c,b,a){return null};